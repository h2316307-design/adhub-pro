# WhatsApp Web.js API Bridge

ูุฐุง ุฎุงุฏู API ูุญูู ูุฑุจุท ุจูู ูุธุงู ูุงุฑุณ ููุชุณุงุจ Web.js ุนุจุฑ Supabase Edge Functions.

## ุงูุชุซุจูุช ูุงูุชุดุบูู

### 1. ุชุซุจูุช ุงูุชุจุนูุงุช
```bash
cd WhatsApp
npm install
```

### 2. ุชุดุบูู ุงูุฎุงุฏู
```bash
npm start
```

ุฃู ููุชุทููุฑ ูุน ุฅุนุงุฏุฉ ุงูุชุดุบูู ุงูุชููุงุฆู:
```bash
npm run dev
```

ุงูุฎุงุฏู ุณูุนูู ุนูู: `http://localhost:3001`

### 3. ุฅุนุฏุงุฏ Supabase Secret

ุฃุถู Secret ูู Supabase ุจุงุณู `WHATSAPP_BRIDGE_URL`:

**ููุชุทููุฑ ุงููุญูู:**
- ุงุณุชุฎุฏู ngrok ุฃู localtunnel ููุชุญ ููู ุนุงู:
```bash
npx localtunnel --port 3001
```
- ุงูุณุฎ ุงูุฑุงุจุท ุงูุนุงู (ูุซู: `https://xxxx.loca.lt`)
- ุฃุถูู ูู Secret ูู Supabase: `WHATSAPP_BRIDGE_URL`

**ููุฅูุชุงุฌ:**
- ุงุฑูุน ุงูุฎุงุฏู ุนูู VPS ุฃู Heroku ุฃู Railway
- ุงุณุชุฎุฏู ุงูุฑุงุจุท ุงูุนุงู (ูุซู: `https://your-server.com`)

### 4. ุงุณุชุฎุฏุงู ุงููุธุงู

1. ุดุบูู ุงูุฎุงุฏู ุงููุญูู: `npm start`
2. ุงูุชุญ ุตูุญุฉ "ุฅุนุฏุงุฏุงุช ุงููุฑุงุณูุฉ" ูู ุงููุธุงู
3. ุงูุชูู ุฅูู ุชุจููุจ "ูุงุชุณุงุจ Web"
4. ุงุถุบุท "ุจุฏุก ุงูุงุชุตุงู"
5. ุงูุณุญ QR Code ุจูุงุชุณุงุจ ุนูู ูุงุชูู
6. ุงุจุฏุฃ ุจุฅุฑุณุงู ุงูุฑุณุงุฆู! ๐

## API Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/status` | GET | ุญุงูุฉ ุงูุงุชุตุงู |
| `/start` | POST | ุจุฏุก ุงูุงุชุตุงู + QR Code |
| `/disconnect` | POST | ูุทุน ุงูุงุชุตุงู |
| `/send` | POST | ุฅุฑุณุงู ุฑุณุงูุฉ |

## ูุซุงู ุนูู ุฅุฑุณุงู ุฑุณุงูุฉ

```javascript
POST /send
{
  "phone": "218910000000",
  "message": "ูุฑุญุจุงู ูู ูุธุงู ูุงุฑุณ"
}
```

## ููุงุญุธุงุช ูููุฉ

- ุงูุฎุงุฏู ูุฌุจ ุฃู ูููู ููุฏ ุงูุชุดุบูู ุทูุงู ุงูููุช ูุฅุฑุณุงู ุงูุฑุณุงุฆู
- ูุชู ุญูุธ ุงูุฌูุณุฉ ูู ูุฌูุฏ `.wwebjs_auth`
- ูุง ุชุญุฐู ูุฌูุฏ ุงูุฌูุณุฉ ูุฅูุง ุณุชุญุชุงุฌ ุฅูู ูุณุญ QR ูุฑุฉ ุฃุฎุฑู
- ููุฅูุชุงุฌุ ุงุณุชุฎุฏู PM2 ุฃู ูุฏูุฑ ุนูููุงุช ููุญูุงุธ ุนูู ุนูู ุงูุฎุงุฏู

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

**ูุดููุฉ: "Failed to fetch"**
- ุชุฃูุฏ ูู ุชุดุบูู ุงูุฎุงุฏู: `npm start`
- ุชุฃูุฏ ูู ุฅุถุงูุฉ `WHATSAPP_BRIDGE_URL` ูู Supabase Secrets

**ูุดููุฉ: "CORS error"**
- ุงูุฎุงุฏู ูุฏุนู CORS ุงูุชุฑุงุถูุงูุ ูุง ูุญุชุงุฌ ุชุนุฏูู

**ูุดููุฉ: "Client not ready"**
- ุงูุชุธุฑ ุญุชู ููุชูู ุงูุงุชุตุงู (ุงูุณุญ QR Code)
- ุชุญูู ูู logs ุงูุฎุงุฏู

## ุงูุชุทููุฑ

ููุชุทููุฑ ุงููุญููุ ุงุณุชุฎุฏู `localtunnel`:

```bash
# Terminal 1
npm start

# Terminal 2
npx localtunnel --port 3001
```

ุซู ุฃุถู ุงูุฑุงุจุท ุงููุงุชุฌ ูู Supabase Secrets.
